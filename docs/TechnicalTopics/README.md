---
title: http协议
sidebarDepth: 3
---

## 报文

### 首部

- 通用首部

- 请求首部

- 响应首部

- 实体首部

### 实体

## scouter 是如何判断的?

### 缓存? 压缩方式? 重定向? 跨域? HSTS?

### 资源大小计算?

## 缓存

### 强缓存

#### Expires

http1.0: Expires(在这个字段时间之前都采用缓存),绝对时间

#### Cache-Control

- 对响应头来说

max-age:相对时间的强缓存

s-maxage:针对于公共缓存服务器的指令(公共服务器:比如 cdn),如果存在这个字段,会忽略 max-age

- 对请求头来说

max-age:在客户端角度,如果缓存资源的缓存时间数值比指定时间的数值更小，那么客户端就接收缓存的资源,当这个字段为 0 时,通常缓存服务器会将请求转发给源服务器

### 协商缓存

#### Last-Modified 和 If-Modified-Since

在服务端对比来自客户端的 if-Modified-Since 时间与文件最后修改时间,如果不相同则文件已修改,返回新的修改时间 Last-Modified 与文件,否则返回 304 状态码

#### ETag 和 If-None-Match

文件内容改变时,文件唯一标识 ETag 也会改变,每次服务器接收请求时,对比来自客户端的 ETag 值,如果相同返回 304 状态码

## 状态码

## http 1.1 的特性

### 长连接

新增 Connection 字段,设置 keep-alive 保持 TCP 连接,直至有一方主动断开连接,默认保持长连接

### 管线化(并行请求)

基于长连接的基础,并行发起请求(响应依旧阻塞),而且浏览器客户端针对于同一时间,同一域名也会有请求数量限制

### 缓存

新增 Cache-Control

## http 2 的特性

### 多路复用

允许通过单一的 HTTP/2 连接发起多重的请求-响应

### 二进制分帧

HTTP 1.x 在应用层以纯文本的形式进行通信，而 HTTP 2.0 将所有的传输信息分割为更小的消息和帧，并对它们采用二进制格式编码

### 请求优先级
